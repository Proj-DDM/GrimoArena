#ifndef ISCENE_H
#define ISCENE_H

/*-----------------------------------------------
	ファイル名　IScene.h
	作成者		小林　大峰
-----------------------------------------------*/

#include "cocos2d.h"
#include <vector>

//シーン列挙
enum SCENESTATE{
	FADEIN = 0,
	MAIN,
	FADEOUT,
	SCENEEND
};

//メインループ時の状態を列挙
enum UPDATESTATE{
	UPDATESTART = 0,
	UPDATELOOP,
	UPDATEEND,
	NULLUPDATE
};

//関数状態の列挙
enum FUNCTIONSTATE{
	FUNCTIONTRUE = 0,
	FUNCTIONEND
};


class IScene : public cocos2d::Ref
{
public:

	/*------------------------------------------------------------------
	|	コンストラクタ
	------------------------------------------------------------------*/
	IScene();
	/*------------------------------------------------------------------
	|	デストラクタ
	------------------------------------------------------------------*/
	virtual ~IScene(){};

	/*------------------------------------------------------------------
	|	初期化
	------------------------------------------------------------------*/
	virtual bool init(cocos2d::Layer* layer) = 0;

	/*------------------------------------------------------------------
	|	更新関数（メイン）
	------------------------------------------------------------------*/
	virtual void update(float deltaTime) = 0;

	/*------------------------------------------------------------------
	|	更新関数
	|	シーンの状態によって更新する関数を変える
	|	・fadeIn	・sceneMain		・fadeOut
	-------------------------------------------------------------------*/
	
	/*--------------------------------------------------------------------
	|	シーン始め
	-------------------------------------------------------------------*/
	virtual void fadeIn(float at){ };
	
	
	/*------------------------------------------------------------------
	|	ゲームメイン更新
	-------------------------------------------------------------------*/
	virtual void sceneMain(float at){ };
	
	/*------------------------------------------------------------------
	|	シーン終了
	------------------------------------------------------------------*/
	virtual void fadeOut(float at){  };

protected:
	/*------------------------------------------------------------------
	|	ゲームループ用更新関数
	|	メインループの状態によって更新する関数を変える
	|	・mainStart	  ・mainLoop	・mainEnd
	-------------------------------------------------------------------*/

	/*------------------------------------------------------------------
	|	メインループ始め
	-------------------------------------------------------------------*/
	virtual void mainStart(float at){};


	/*------------------------------------------------------------------
	|	ゲームメイン更新
	-------------------------------------------------------------------*/
	virtual void mainLoop(float at){};


	/*------------------------------------------------------------------
	|	メインループ終了
	------------------------------------------------------------------*/
	virtual void mainEnd(float at){};

protected:
	/*------------------------------------------------------------------
	|	更新関数ポインタ
	------------------------------------------------------------------*/
	void(IScene::*updateFunc[SCENESTATE::SCENEEND])(float at);

	/*------------------------------------------------------------------
	|	ゲームループ用更新関数ポインタ
	------------------------------------------------------------------*/
	void(IScene::*mainFunc[UPDATESTATE::NULLUPDATE])(float at);

	SCENESTATE mSceneState;

	UPDATESTATE mUpdateState;

	cocos2d::Layer* parentLayer;
};

#endif